import{G as m,_ as v,d as z,r as u,y as O,o,h as g,g as s,H as N,E as S,u as $,a as A,b as p,c,e as t,C as P,B as n,f as i,w as r,k as x,F as D,j as I}from"./index.78778fd6.js";const j={plugins:{legend:{position:"bottom",labels:{font:{color:"#34495e",family:"sans-serif",size:14},usePointStyle:!0}},tooltip:{bodyFont:{size:14,family:"sans-serif"},boxPadding:4}},datasets:{line:{fill:"origin",tension:.3,borderColor:"transparent"},bubble:{borderColor:"transparent"},bar:{borderColor:"transparent"}},maintainAspectRatio:!1,animation:!0},G={pie:m(()=>v(()=>import("./PieChart.88a0726f.js"),["assets/PieChart.88a0726f.js","assets/index.0641e342.js","assets/index.78778fd6.js","assets/index.906fa747.css"])),doughnut:m(()=>v(()=>import("./DoughnutChart.952272a9.js"),["assets/DoughnutChart.952272a9.js","assets/index.0641e342.js","assets/index.78778fd6.js","assets/index.906fa747.css"])),bubble:m(()=>v(()=>import("./BubbleChart.120acb10.js"),["assets/BubbleChart.120acb10.js","assets/index.0641e342.js","assets/index.78778fd6.js","assets/index.906fa747.css"])),line:m(()=>v(()=>import("./LineChart.35043685.js"),["assets/LineChart.35043685.js","assets/index.0641e342.js","assets/index.78778fd6.js","assets/index.906fa747.css"])),bar:m(()=>v(()=>import("./BarChart.2e2afe93.js"),["assets/BarChart.2e2afe93.js","assets/index.0641e342.js","assets/index.78778fd6.js","assets/index.906fa747.css"])),"horizontal-bar":m(()=>v(()=>import("./HorizontalBarChart.735fdf2f.js"),["assets/HorizontalBarChart.735fdf2f.js","assets/index.0641e342.js","assets/index.78778fd6.js","assets/index.906fa747.css"]))};const U=z({__name:"VaChart",props:{data:null,options:null,type:null},setup(L){const b=L,l=u(),k=O(()=>G[b.type]),C=O(()=>({...j,...b.options}));return(d,V)=>(o(),g(N(s(k)),{ref_key:"chart",ref:l,class:"va-chart","chart-options":s(C),"chart-data":L.data},null,8,["chart-options","chart-data"]))}});const K={key:0,class:"flex xs12"},Y={class:"va-h1"},Z=t("i",{class:"fa-solid fa-ethernet"},null,-1),q=["innerHTML"],J=t("h2",{class:"va-h2"},"Ports",-1),Q={key:0,class:"fa-solid fa-upload",title:"uplink"},W=t("i",{class:"fa-solid fa-ethernet"},null,-1),X=t("h2",{class:"va-h2"},"Info",-1),tt=t("dt",null,"Status:",-1),at=t("dt",null,"Type:",-1),et=t("dt",null,"VLAN:",-1),st=t("dt",null,"RSTP:",-1),nt=t("dt",null,"Speed:",-1),ot=t("h2",{class:"va-h2"},"Traffic",-1),lt=t("h2",{class:"va-h2"},"Clients",-1),rt={class:"va-table va-table--striped"},dt=t("thead",null,[t("tr",null,[t("th",null,"name"),t("th",{class:"text-end"},"ip"),t("th",{class:"text-end"},"mac"),t("th",{class:"text-end"},"vlan"),t("th",{class:"text-end"},"sent"),t("th",{class:"text-end"},"received")])],-1),it={class:"text-end"},ct={class:"text-end"},ut={class:"text-end"},_t={class:"text-end"},ht={class:"text-end"},ft=z({__name:"Port",setup(L){function b(a,y=2){if(!+a)return"0 Bytes";const _=1024,h=y<0?0:y,R=["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],w=Math.floor(Math.log(a)/Math.log(_));return`${parseFloat((a/Math.pow(_,w)).toFixed(h))} ${R[w]}`}const l=S(),k=$();let C=u(),d=u(),V=u(),M=u(),F=u(),f=u();A.get("https://cpe-panel.surfi.ch:3000/api/switches/"+l.params.serial).then(function(a){F.value=a.data,V.value=a.data.ports,f.value=[],f.value.push({label:a.data.network.organization.name,to:"/networks"}),f.value.push({label:a.data.network.name,to:"/networks"}),f.value.push({label:a.data.name,to:"/switches/"+l.params.serial}),f.value.push({label:'<i class="fa-solid fa-ethernet"></i>'+l.params.port})}).catch(a=>{k.push({name:"login"})}),A.get("https://cpe-panel.surfi.ch:3000/api/switches/"+l.params.serial+"/port/"+l.params.port).then(function(a){M.value=a.data.port.switch,C.value=a.data.clients,d.value=a.data.port}).catch(a=>{k.push({name:"login"})});let T=u();return A.get("https://cpe-panel.surfi.ch:3000/api/logs/traffic/"+l.params.serial+"/"+l.params.port).then(function(a){if(!a.data)return;let y=["#277da1","#577590","#4d908e","#43aa8b","#90be6d","#f9c74f","#f9844a","#f8961e","#f3722c","#f94144"],_=[];for(let h in a.data)h!="Total"&&_.push({label:h,backgroundColor:y.shift(),borderColor:"transparent",data:a.data[h].traffic});T.value={labels:a.data.Total.dates,datasets:_}}).catch(a=>{console.error(a)}),(a,y)=>{const _=p("router-link"),h=p("va-breadcrumbs-item"),R=p("va-breadcrumbs"),w=p("va-button"),B=p("va-card-content"),E=p("va-card"),H=p("va-chip");return s(M)?(o(),c("div",K,[t("h1",Y,[P(n(s(M).name)+" ",1),Z,P(n(s(l).params.port),1)]),i(R,null,{default:r(()=>[(o(!0),c(D,null,I(s(f),e=>(o(),g(h,{key:e},{default:r(()=>[e.to?(o(),g(_,{key:0,to:e.to,innerHTML:e.label},null,8,["to","innerHTML"])):(o(),c("span",{key:1,innerHTML:e.label},null,8,q))]),_:2},1024))),128))]),_:1}),i(E,{class:"larger-padding my-4"},{default:r(()=>[i(B,null,{default:r(()=>[J,t("table",null,[t("tr",null,[(o(!0),c(D,null,I(s(V),e=>(o(),c("td",{key:e.port},[i(w,{preset:e.port==s(l).params.port?"primary":"secondary",to:"/switches/"+s(l).params.serial+"/"+e.port},{default:r(()=>[e.data.isUplink?(o(),c("i",Q)):x("",!0),W,P(" # "+n(e.port),1)]),_:2},1032,["preset","to"])]))),128))])])]),_:1})]),_:1}),s(T)?(o(),g(E,{key:0,class:"larger-padding my-4"},{default:r(()=>[i(B,null,{default:r(()=>[X,t("dl",null,[tt,t("dd",null,[i(H,{size:"small",color:s(d).data.status==="Connected"?"success":"danger"},{default:r(()=>[P(n(s(d).data.status.toLowerCase()),1)]),_:1},8,["color"])]),at,t("dd",null,[t("pre",null,n(s(d).type),1)]),et,t("dd",null,n(s(d).data.vlan?"true":"false"),1),st,t("dd",null,n(s(d).data.rstpEnabled?"true":"false"),1),nt,t("dd",null,n(s(d).data.speed),1)])]),_:1})]),_:1})):x("",!0),s(T)?(o(),g(E,{key:1,class:"larger-padding my-4"},{default:r(()=>[i(B,null,{default:r(()=>[ot,i(U,{class:"chart",data:s(T),type:"line"},null,8,["data"])]),_:1})]),_:1})):x("",!0),s(d).data.isUplink?x("",!0):(o(),g(E,{key:2,class:"larger-padding my-4"},{default:r(()=>[i(B,null,{default:r(()=>[lt,t("table",rt,[dt,t("tbody",null,[(o(!0),c(D,null,I(s(C),e=>(o(),c("tr",{key:e.id},[t("td",null,n(e.name||e.data.mac),1),t("td",it,n(e.data.ip),1),t("td",ct,n(e.data.mac),1),t("td",ut,n(e.data.vlan),1),t("td",_t,n(b(e.data.usage.sent)),1),t("td",ht,n(b(e.data.usage.recv)),1)]))),128))])])]),_:1})]),_:1}))])):x("",!0)}}});export{ft as default};
