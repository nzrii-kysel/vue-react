import{d as z,u as B,r as w,a as p,b as c,o as n,h as N,w as s,f as u,e,c as a,j as f,C as h,B as l,F as g,g as V}from"./index.78778fd6.js";const y=e("h1",{class:"va-h1"},"Users",-1),F={class:"va-table va-table--striped va-table--hoverable"},$=e("thead",null,[e("tr",null,[e("th",null,"email"),e("th",null,"name"),e("th",null,"role"),e("th",null,"organization"),e("th",null,"actions")])],-1),j={key:0},A={key:1},D={key:2,class:"va-unordered"},E=e("i",{class:"mr-2 fa-solid fa-trash"},null,-1),L=h(" delete "),R={colspan:"5",class:"text-center"},S=e("i",{class:"mr-2 fa-solid fa-circle-plus"},null,-1),T=h(" new "),G=z({__name:"index",setup(U){function v(o){if(confirm(`Are you sure you want to delete user "${o.name}"?`)){let i="https://cpe-panel.surfi.ch:3000/api/admin/users/"+o.id;p.delete(i).then(function(r){d.go(0)}).catch(r=>{d.push({name:"login"})})}}const d=B();let k="https://cpe-panel.surfi.ch:3000/api/admin/users",m=w();return p.get(k).then(function(o){m.value=o.data}).catch(o=>{d.push({name:"login"})}),(o,b)=>{const i=c("router-link"),r=c("va-button"),x=c("va-card-content"),C=c("va-card");return n(),N(C,{class:"larger-padding"},{default:s(()=>[u(x,null,{default:s(()=>[y,e("table",F,[$,e("tbody",null,[(n(!0),a(g,null,f(V(m),t=>(n(),a("tr",{key:t.id},[e("td",null,[u(i,{to:"/admin/users/"+t.id},{default:s(()=>[h(l(t.email),1)]),_:2},1032,["to"])]),e("td",null,l(t.name),1),e("td",null,l(t.role),1),e("td",null,[t.organizations.length==0?(n(),a("span",j," -- none ")):t.organizations.length==1?(n(),a("span",A,l(t.organizations[0].name),1)):(n(),a("ul",D,[(n(!0),a(g,null,f(t.organizations,_=>(n(),a("li",{key:_.id},l(_.name),1))),128))]))]),e("td",null,[u(r,{color:"danger",onClick:_=>v(t)},{default:s(()=>[E,L]),_:2},1032,["onClick"])])]))),128))]),e("tfoot",null,[e("tr",null,[e("td",R,[u(r,{color:"primary",to:"/admin/users/create"},{default:s(()=>[S,T]),_:1})])])])])]),_:1})]),_:1})}}});export{G as default};
